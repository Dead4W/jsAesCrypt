AesCrypt=function(){let e={version:"0.13a",bufferSize:32768,fileFormatVersion:2,maxPassLen:1024,AESBlockSize:16};var t=function(e){let t=0,n=e.size,o=new FileReader,i=e;async function a(e){return await function(e){return new Promise((r,n)=>{let a=i.slice(t,t+=e);o.onload=(()=>{r(new Uint8Array(o.result))}),o.onerror=n,o.readAsArrayBuffer(a)})}(e)}return{readByte:async function(){return(await a(1))[0]},readBytes:a,readBytesAsInt:async function(e){let t=await a(e);return r.arrToInt(t)},readBytesAsString:async function(e){let t=await a(e);return r.bytes_to_latin1(t)},getCurrentPosition:function(){return t},getLength:function(){return n}}},r={random_int:function(e,t){return Math.floor(Math.random()*(t-e)+e)},urandom:function(e){let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(this.random_int(0,256));return t},fillArray:function(e,t){let r=[];for(let n=0;n<t;n++)r.push(e);return r},arrToInt:function(e){return parseInt(Array.prototype.map.call(e,e=>("00"+e.toString(16)).slice(-2)).join(""),16)},bytes_to_latin1:function(e){return CryptoJS.enc.Latin1.stringify(CryptoJS.enc.Uint8Arr.parse(e))},encode_to_words:function(e,t="Latin1"){return CryptoJS.enc[t].parse(e)}};function n(e,t){return CryptoJS.algo.AES.createEncryptor(r.encode_to_words(e),{mode:CryptoJS.mode.CBC,iv:CryptoJS.enc.Latin1.parse(t),padding:CryptoJS.pad.NoPadding})}function o(e,t){return CryptoJS.algo.AES.createDecryptor(r.encode_to_words(e),{mode:CryptoJS.mode.CBC,iv:CryptoJS.enc.Latin1.parse(t),padding:CryptoJS.pad.NoPadding})}function i(e,t){let n=r.encode_to_words(t+"\0".repeat(16));for(let t=0;t<8192;t++){let t=CryptoJS.algo.SHA256.create();t.update(n),t.update(r.encode_to_words(e,"Utf16LE")),n=t.finalize()}return n.toString(CryptoJS.enc.Latin1)}return Uint8Array.prototype.appendBytes=function(e){let t;if("number"==typeof e){let r=e.toString(16);t=new Uint8Array(r.match(/.{1,2}/g).map(e=>parseInt(e,16)))}else if("string"==typeof e){t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r)}else t=new Uint8Array(e);let r=new Uint8Array(this.length+t.length);return r.set(this),r.set(t,this.length),r},{encrypt:async function(o,a,s=(e=>{})){if(a.length>e.maxPassLen)return console.warn("Password is too long."),!1;const l=r.urandom(e.AESBlockSize),c=i(a,l),p=r.urandom(e.AESBlockSize),d=r.urandom(32),y=n(d,p),S=CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256,r.encode_to_words(d)),u=n(c,l),f=u.process(r.encode_to_words(p+d)).toString(CryptoJS.enc.Latin1)+u.finalize().toString(CryptoJS.enc.Latin1),g=CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256,r.encode_to_words(c));return g.update(r.encode_to_words(f)),await async function(n,o,i,a,s,l,c){let p=new Uint8Array([]);p=(p=(p=p.appendBytes("AES")).appendBytes(e.fileFormatVersion)).appendBytes(0);const d="jsAesCrypt "+e.version;p=(p=(p=(p=(p=(p=(p=(p=(p=(p=(p=p.appendBytes(0)).appendBytes(1+("CREATED_BY"+d).length)).appendBytes("CREATED_BY")).appendBytes(0)).appendBytes(d)).appendBytes([0,128])).appendBytes(r.fillArray(0,128))).appendBytes([0,0])).appendBytes(o)).appendBytes(i)).appendBytes(s.finalize().toString(CryptoJS.enc.Latin1));let y=String.fromCharCode(0),S=new t(n);Math.ceil(S.getLength()/e.bufferSize);let u=Math.ceil((S.getLength()-S.getCurrentPosition())/e.bufferSize),f=0;for(;S.getCurrentPosition()<S.getLength();){let t=await S.readBytes(e.bufferSize),n=t.length,o=l.process(r.encode_to_words(t,"Uint8Arr")).toString(CryptoJS.enc.Latin1);if(n<e.bufferSize){let t;y=String.fromCharCode(n%e.AESBlockSize),t=n%e.AESBlockSize==0?0:16-n%e.AESBlockSize;let i=y.repeat(t);o+=l.process(r.encode_to_words(i)).toString(CryptoJS.enc.Latin1)}o+=l.finalize().toString(CryptoJS.enc.Latin1),a.update(r.encode_to_words(o)),p=p.appendBytes(o),c(++f/u)}return p=(p=p.appendBytes(y)).appendBytes(a.finalize().toString(CryptoJS.enc.Latin1)),await p}(o,l,f,S,g,y,s)},decrypt:async function(n,a,s=(e=>{})){if(a.length>e.maxPassLen)return console.warn("Password is too long."),!1;let l=t(n);if("AES"!==await l.readBytesAsString(3)||l.getLength()<136)return console.warn("File is corrupted or not an AES Crypt \n(or jsAesCrypt) file."),!1;if(await l.readByte()!==e.fileFormatVersion)return console.warn("jsAesCrypt is only compatible with version \n2 of the AES Crypt file format."),!1;for(await l.readByte();;){let e=await l.readBytes(2);if(e.length<2)return console.warn("File is corrupted."),!1;if(0==(e=+r.arrToInt(e)))break;await l.readBytes(e)}let c=await l.readBytesAsString(16);if(16!==c.length)return console.warn("File is corrupted."),!1;let p=i(a,c),d=await l.readBytesAsString(48);if(48!==d.length)return console.warn("File is corrupted."),!1;let y=await l.readBytesAsString(32);if(32!==y.length)return console.warn("File is corrupted."),!1;let S=CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256,r.encode_to_words(p));if(S.update(r.encode_to_words(d)),y!==CryptoJS.enc.Latin1.stringify(S.finalize()))return console.warn("Wrong password (or file is corrupted)."),!1;let u=o(p,c),f=u.process(r.encode_to_words(d)).toString(CryptoJS.enc.Latin1)+u.finalize().toString(CryptoJS.enc.Latin1),g=f.substr(0,e.AESBlockSize),C=f.substr(e.AESBlockSize,32),w=o(C,g),A=CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256,r.encode_to_words(C)),B=new Uint8Array([]),_=Math.ceil((l.getLength()-l.getCurrentPosition()-32-1-e.AESBlockSize)/e.bufferSize)+1,h=0;for(;l.getCurrentPosition()<l.getLength()-32-1-e.AESBlockSize;){let t=r.encode_to_words(await l.readBytes(Math.min(e.bufferSize,l.getLength()-l.getCurrentPosition()-32-1-e.AESBlockSize)),"Uint8Arr");A.update(t),B=B.appendBytes(w.process(t).toString(CryptoJS.enc.Latin1)),s(++h/_)}var J;if(l.getCurrentPosition()!==l.getLength()-32-1){if((J=await l.readBytes(e.AESBlockSize)).length<e.AESBlockSize)return console.warn("File is corrupted."),!1}else J=new Uint8Array([]);J=r.encode_to_words(J,"Uint8Arr"),A.update(J);let L=await l.readBytesAsInt(1),z=w.process(J).toString(CryptoJS.enc.Latin1)+w.finalize().toString(CryptoJS.enc.Latin1),m=(16-L)%16;0!==m&&(z=z.substr(0,z.length-m)),B=B.appendBytes(z);let E=await l.readBytesAsString(32);return 32!==E.length?(console.warn("File is corrupted."),!1):E!==CryptoJS.enc.Latin1.stringify(A.finalize())?(console.warn("Bad HMAC (file is corrupted)."),!1):(s(1),B)},utils:r,getInfo:function(){return e}}};